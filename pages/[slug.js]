import { useRouter } from 'next/router';

export default function BioPage({ bioData }) {
  const router = useRouter();
  const { slug } = router.query; // Get the dynamic part of the URL

  return (
    <>
      <html lang="en">
        <head>
          <meta charset="UTF-8" />
          <meta name="viewport" content="width=device-width, initial-scale=1.0" />
          <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
          />
          <title>{bioData.name} Bio</title>
          <style>{`
            @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600&display=swap');
            *{ margin: 0; padding: 0; box-sizing: border-box; text-decoration: none; font-family: 'Poppins', sans-serif;}
            html{font-size: 62.5%;}
            body{width: 100%; height: 100vh; overflow-x: hidden; background-color: black; color: white;}
            header{margin-top: 20px; position: fixed; top: 0; width: 100%; padding: 1rem 9%; background-color: transparent; display: flex; justify-content: space-between;}
            .logo{font-size: 3rem; color: #b74b4b; font-weight: 800; cursor: pointer; transition: 0.5s ease;}
            nav a{font-size: 1.8rem; color: white; margin-left: 4rem;}
            .home{display: flex; justify-content: center; align-items: center; gap: 8rem; background-color: black;}
            .home-content h1{font-size: 6rem; font-weight: 700;}
            .home-content p{font-size: 1.6rem;}
            .home-img img {border-radius: 15px; box-shadow: 0 0 25px rgba(183, 75, 75, 0.5);}
            .social-icons a{display: inline-flex; justify-content: center; align-items: center; width: 4rem; height: 4rem; background-color: transparent; border: 0.2rem solid #b74b4b; font-size: 2rem; border-radius: 50%; margin: 3rem 1.5rem;}
          `}</style>
        </head>
        <body>
          <header>
            <a href="#" className="logo">{bioData.name}</a>
            <nav>
              <a href="#" className="active">Home</a>
            </nav>
          </header>
          <section className="home">
            <div className="home-img">
              <img src={bioData.imageUrl} alt={`${bioData.name}'s Profile Picture`} />
            </div>
            <div className="home-content">
              <h1>Hi, It's <span>{bioData.name}</span></h1>
              <h3>{bioData.title}</h3>
              <p>{bioData.bio}</p>
              <div className="social-icons">
                {bioData.socialLinks.github && (
                  <a href={bioData.socialLinks.github}>
                    <i className="fa-brands fa-github"></i>
                  </a>
                )}
                {bioData.socialLinks.twitter && (
                  <a href={bioData.socialLinks.twitter}>
                    <i className="fa-brands fa-x-twitter"></i>
                  </a>
                )}
              </div>
            </div>
          </section>
        </body>
      </html>
    </>
  );
}

// Fetch user bio data based on the slug
export async function getServerSideProps(context) {
  const { slug } = context.params;

  // Simulate fetching the user's data based on the slug
  const bioData = {
    name: "Mason",
    imageUrl: "/cdn/mxsonnpfp.png", // Replace this with the actual URL
    title: "I'm a Web Developer and ERLC server owner",
    bio: `Hey, I'm Mason! I'm 13 and I've been doing web development for a while now.
          I work with Node.js, Discord.js, HTML, and CSS. I'm always learning new things and improving.`,
    socialLinks: {
      github: "https://github.com/MxsonnGithub",
      twitter: "https://x.com/WolfyyX__",
    },
  };

  return {
    props: {
      bioData,
    },
  };
}
